# نظام الشهادات الصحية الموحدة

نظام شامل لإصدار والتحقق من الشهادات الصحية مع دعم رمز QR وإنتاج ملفات PDF باستخدام القوالب المحددة.

## المميزات

- **إصدار الشهادات**: إنشاء شهادات صحية جديدة مع البيانات المطلوبة
- **إنتاج PDF**: تصدير الشهادات بصيغة PDF باستخدام القوالب الرسمية
- **رمز QR**: تضمين رمز QR في كل شهادة للتحقق السريع
- **التحقق المتعدد**: التحقق من الشهادات برقم الهوية أو بفحص رمز QR
- **واجهة عربية**: واجهة مستخدم باللغة العربية مع دعم RTL
- **قاعدة بيانات**: تخزين آمن لجميع بيانات الشهادات

## التقنيات المستخدمة

### الخلفية (Backend)
- **Flask**: إطار العمل الرئيسي للخادم
- **SQLAlchemy**: إدارة قاعدة البيانات
- **FPDF2**: إنتاج ملفات PDF
- **QRCode**: إنشاء رموز QR
- **PyZbar**: قراءة رموز QR من ملفات PDF

### الواجهة الأمامية (Frontend)
- **HTML5/CSS3**: هيكل وتصميم الواجهة
- **Bootstrap 5**: إطار العمل للتصميم المتجاوب
- **JavaScript**: التفاعل مع الخادم والمستخدم
- **Font Awesome**: الأيقونات

## متطلبات التشغيل

- Python 3.11+
- SQLite (مدمج مع Python)
- المكتبات المذكورة في `requirements.txt`

## التثبيت والتشغيل

### 1. تثبيت المتطلبات
```bash
cd health_certificate_system
source venv/bin/activate
pip install -r requirements.txt
```

### 2. تشغيل النظام
```bash
python src/main.py
```

سيعمل النظام على العنوان: `http://localhost:5000`

## هيكل المشروع

```
health_certificate_system/
├── src/
│   ├── main.py                 # نقطة البداية الرئيسية
│   ├── models/
│   │   └── certificate.py      # نموذج قاعدة البيانات للشهادات
│   ├── routes/
│   │   └── certificate.py      # مسارات API للشهادات
│   ├── static/
│   │   ├── index.html          # الواجهة الرئيسية
│   │   └── script.js           # منطق JavaScript
│   └── database/
│       └── app.db              # قاعدة البيانات SQLite
├── certificate_template-1.png  # قالب الشهادة (الصفحة الأولى)
├── certificate_template-2.png  # قالب التعليمات (الصفحة الثانية)
├── Tajawal-Regular.ttf         # خط عربي للنصوص
├── generate_pdf.py             # وحدة إنتاج ملفات PDF
├── verify_qr.py               # وحدة التحقق من رموز QR
└── requirements.txt           # متطلبات Python
```

## واجهات API

### إصدار شهادة جديدة
```
POST /api/certificates
Content-Type: application/json

{
    "name": "اسم المستفيد",
    "id_number": "رقم الهوية",
    "nationality": "الجنسية",
    "profession": "المهنة",
    "issue_date": "تاريخ الإصدار",
    "expiry_date": "تاريخ الانتهاء"
}
```

### التحقق من شهادة
```
GET /api/certificates/{id_number}/verify
```

### تحميل شهادة PDF
```
GET /api/certificates/{id_number}/pdf
```

### التحقق من رمز QR
```
POST /api/verify-qr
Content-Type: multipart/form-data

pdf_file: [ملف PDF]
```

### قائمة الشهادات
```
GET /api/certificates
```

## الاستخدام

### إصدار شهادة جديدة
1. اختر تبويب "إصدار شهادة"
2. املأ البيانات المطلوبة
3. اضغط "إصدار الشهادة"
4. ستظهر رسالة تأكيد مع رابط تحميل PDF

### التحقق من شهادة
#### بواسطة رقم الهوية:
1. اختر تبويب "التحقق من شهادة"
2. أدخل رقم الهوية
3. اضغط "التحقق"

#### بواسطة رمز QR:
1. اختر تبويب "التحقق من شهادة"
2. ارفع ملف PDF للشهادة
3. اضغط "فحص رمز QR"

### عرض قائمة الشهادات
1. اختر تبويب "قائمة الشهادات"
2. ستظهر جميع الشهادات المسجلة
3. يمكن تحميل PDF لأي شهادة من خلال زر "PDF"

## الأمان

- جميع البيانات محفوظة في قاعدة بيانات محلية
- رموز QR تحتوي على معلومات التحقق
- التحقق من صحة البيانات قبل الحفظ
- حماية من التكرار (رقم هوية واحد لكل شهادة)

## الدعم الفني

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.

## الترخيص

هذا النظام مطور خصيصاً لاستخدام الجهات الحكومية والصحية.

